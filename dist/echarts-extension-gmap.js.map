{"version":3,"file":"echarts-extension-gmap.js","sources":["../src/helper.js","../src/GMapCoordSys.js","../src/GMapModel.js","../src/GMapView.js","../src/index.js","../index.js"],"sourcesContent":["import { version } from 'echarts/lib/echarts'\n\nexport const ecVer = version.split('.')\n\nexport const isNewEC = ecVer[0] > 4\n\nexport const COMPONENT_TYPE = 'gmap'\n\nexport function v2Equal(a, b) {\n  return a && b && a[0] === b[0] && a[1] === b[1]\n}\n","/* global google */\n\nimport { util as zrUtil, graphic, matrix } from 'echarts/lib/echarts'\nimport { COMPONENT_TYPE } from './helper'\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0]\n  return zrUtil.map(\n    [0, 1],\n    function(dimIdx) {\n      const val = dataItem[dimIdx]\n      const halfSize = dataSize[dimIdx] / 2\n      const p1 = []\n      const p2 = []\n      p1[dimIdx] = val - halfSize\n      p2[dimIdx] = val + halfSize\n      p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx]\n      return Math.abs(\n        this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]\n      )\n    },\n    this\n  )\n}\n\nfunction GMapCoordSys(gmap, api) {\n  this._gmap = gmap\n  this.dimensions = ['lng', 'lat']\n  this._mapOffset = [0, 0]\n  this._api = api\n}\n\nconst GMapCoordSysProto = GMapCoordSys.prototype\n\n// exclude private and unsupported options\nconst excludedOptions = [\n  'echartsLayerZIndex',\n  'renderOnMoving'\n]\n\nGMapCoordSysProto.setZoom = function(zoom) {\n  this._zoom = zoom\n}\n\nGMapCoordSysProto.setCenter = function(center) {\n  const latlng = new google.maps.LatLng(center[1], center[0])\n  this._center = latLngToPixel(latlng, this._gmap)\n}\n\nGMapCoordSysProto.setMapOffset = function(mapOffset) {\n  this._mapOffset = mapOffset\n}\n\nGMapCoordSysProto.setGoogleMap = function(gmap) {\n  this._gmap = gmap\n}\n\nGMapCoordSysProto.getGoogleMap = function() {\n  return this._gmap\n}\n\nGMapCoordSysProto.dataToPoint = function(data) {\n  const latlng = new google.maps.LatLng(data[1], data[0])\n  const px = latLngToPixel(latlng, this._gmap)\n  const mapOffset = this._mapOffset\n  return [px.x - mapOffset[0], px.y - mapOffset[1]]\n}\n\nGMapCoordSysProto.pointToData = function(pt) {\n  const mapOffset = this._mapOffset\n  const latlng = pixelToLatLng(\n    new google.maps.Point(pt[0] + mapOffset[0], pt[1] + mapOffset[1]),\n    this._gmap\n  )\n  return [latlng.lng(), latlng.lat()]\n}\n\nGMapCoordSysProto.getViewRect = function() {\n  const api = this._api\n  return new graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight())\n}\n\nGMapCoordSysProto.getRoamTransform = function() {\n  return matrix.create()\n}\n\nGMapCoordSysProto.prepareCustoms = function() {\n  const rect = this.getViewRect()\n  return {\n    coordSys: {\n      type: COMPONENT_TYPE,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: zrUtil.bind(this.dataToPoint, this),\n      size: zrUtil.bind(dataToCoordSize, this)\n    }\n  }\n}\n\nGMapCoordSysProto.convertToPixel = function(ecModel, finder, value) {\n  // here we don't use finder as only one google map component is allowed\n  return this.dataToPoint(value);\n}\n\nGMapCoordSysProto.convertFromPixel = function(ecModel, finder, value) {\n  // here we don't use finder as only one google map component is allowed\n  return this.pointToData(value);\n}\n\nGMapCoordSys.create = function(ecModel, api) {\n  let gmapCoordSys\n  const root = api.getDom()\n\n  ecModel.eachComponent(COMPONENT_TYPE, function(gmapModel) {\n    const painter = api.getZr().painter\n    const viewportRoot = painter.getViewportRoot()\n    if (typeof google === 'undefined' || !google.maps || !google.maps.Map) {\n      throw new Error('Google Map API is not loaded')\n    }\n    Overlay = Overlay || createOverlayCtor()\n    if (gmapCoordSys) {\n      throw new Error('Only one google map component is allowed')\n    }\n    let gmap = gmapModel.getGoogleMap()\n    if (!gmap) {\n      // Not support IE8\n      const className = 'ec-extension-google-map'\n      let gmapRoot = root.querySelector('.' + className)\n      if (gmapRoot) {\n        // Reset viewport left and top, which will be changed\n        // in moving handler in GMapView\n        viewportRoot.style.left = '0'\n        viewportRoot.style.top = '0'\n        root.removeChild(gmapRoot)\n      }\n      gmapRoot = document.createElement('div')\n      gmapRoot.className = className\n      gmapRoot.style.cssText = 'position:absolute;top:0;left:0;right:0;bottom:0'\n      root.appendChild(gmapRoot)\n\n      const options = zrUtil.clone(gmapModel.get())\n      const echartsLayerZIndex = options.echartsLayerZIndex\n      // delete excluded options\n      zrUtil.each(excludedOptions, function(key) {\n        delete options[key]\n      })\n      const center = options.center\n      // normalize center\n      if (zrUtil.isArray(center)) {\n        options.center = {\n          lng: center[0],\n          lat: center[1]\n        }\n      }\n\n      gmap = new google.maps.Map(gmapRoot, options)\n      gmapModel.setGoogleMap(gmap)\n\n      gmapModel.__projectionChangeListener && gmapModel.__projectionChangeListener.remove()\n      gmapModel.__projectionChangeListener = google.maps.event.addListener(gmap, 'projection_changed',\n        function() {\n          const layer = gmapModel.getEChartsLayer()\n          layer && layer.setMap(null)\n\n          const overlay = new Overlay(viewportRoot, gmap)\n          overlay.setZIndex(echartsLayerZIndex)\n          gmapModel.setEChartsLayer(overlay)\n        }\n      )\n\n      // Override\n      painter.getViewportRootOffset = function() {\n        return { offsetLeft: 0, offsetTop: 0 }\n      }\n    }\n\n    const center = gmapModel.get('center')\n    const normalizedCenter = [\n      center.lng != null ? center.lng : center[0],\n      center.lat != null ? center.lat : center[1]\n    ]\n    const zoom = gmapModel.get('zoom')\n    if (center && zoom) {\n      const gmapCenter = gmap.getCenter()\n      const gmapZoom = gmap.getZoom()\n      const centerOrZoomChanged = gmapModel.centerOrZoomChanged([gmapCenter.lng(), gmapCenter.lat()], gmapZoom)\n      if (centerOrZoomChanged) {\n        const pt = new google.maps.LatLng(normalizedCenter[1], normalizedCenter[0])\n        gmap.setOptions({\n          center: pt,\n          zoom: zoom\n        })\n      }\n    }\n\n    gmapCoordSys = new GMapCoordSys(gmap, api)\n    gmapCoordSys.setMapOffset(gmapModel.__mapOffset || [0, 0])\n    gmapCoordSys.setZoom(zoom)\n    gmapCoordSys.setCenter(normalizedCenter)\n\n    gmapModel.coordinateSystem = gmapCoordSys\n  })\n\n  ecModel.eachSeries(function(seriesModel) {\n    if (seriesModel.get('coordinateSystem') === COMPONENT_TYPE) {\n      seriesModel.coordinateSystem = gmapCoordSys\n    }\n  })\n\n  // return created coordinate systems\n  return gmapCoordSys && [gmapCoordSys]\n}\n\nlet Overlay\n\nfunction createOverlayCtor() {\n    function Overlay(root, gmap) {\n      this._root = root\n      this.setMap(gmap)\n    }\n\n    Overlay.prototype = new google.maps.OverlayView()\n\n    Overlay.prototype.onAdd = function() {\n      const gmap = this.getMap()\n      gmap.__overlayProjection = this.getProjection()\n      gmap.getDiv().querySelector('.gm-style > div').appendChild(this._root)\n    }\n\n    /**\n     * @override\n     */\n    Overlay.prototype.draw = function() {\n      google.maps.event.trigger(this.getMap(), 'gmaprender')\n    }\n\n    Overlay.prototype.onRemove = function() {\n      this._root.parentNode.removeChild(this._root)\n      this._root = null\n    }\n\n    Overlay.prototype.setZIndex = function(zIndex) {\n      this._root.style.zIndex = zIndex\n    }\n\n    Overlay.prototype.getZIndex = function() {\n      return this._root.style.zIndex\n    }\n\n    return Overlay\n}\n\nfunction latLngToPixel(latLng, map) {\n  const projection = map.__overlayProjection\n  if (!projection) {\n    return new google.maps.Point(-Infinity, -Infinity)\n  }\n\n  return projection.fromLatLngToContainerPixel(latLng)\n}\n\nfunction pixelToLatLng(pixel, map) {\n  const projection = map.__overlayProjection\n  if (!projection) {\n    return new google.maps.Point(-Infinity, -Infinity)\n  }\n\n  return projection.fromContainerPixelToLatLng(pixel)\n}\n\nGMapCoordSysProto.dimensions = GMapCoordSys.dimensions = ['lng', 'lat']\n\nGMapCoordSysProto.type = COMPONENT_TYPE\n\nexport default GMapCoordSys\n","import { ComponentModel } from 'echarts/lib/echarts'\nimport { COMPONENT_TYPE, isNewEC, v2Equal } from './helper'\n\nconst GMapModel = {\n  type: COMPONENT_TYPE,\n\n  setGoogleMap(gmap) {\n    this.__gmap = gmap\n  },\n\n  getGoogleMap() {\n    // __gmap is set when creating GMapCoordSys\n    return this.__gmap\n  },\n\n  setEChartsLayer(layer) {\n    this.__echartsLayer = layer\n  },\n\n  getEChartsLayer() {\n    return this.__echartsLayer\n  },\n\n  setCenterAndZoom(center, zoom) {\n    this.option.center = center\n    this.option.zoom = zoom\n  },\n\n  centerOrZoomChanged(center, zoom) {\n    const option = this.option\n    return !(v2Equal(center, option.center) && zoom === option.zoom)\n  },\n\n  defaultOption: {\n    center: { lat: 39.90923, lng: 116.397428 },\n    zoom: 5,\n\n    // extension options\n    // since v1.4.0\n    roam: true,\n    echartsLayerZIndex: 2000,\n    renderOnMoving: true\n  }\n}\n\nexport default isNewEC\n  ? ComponentModel.extend(GMapModel)\n  : GMapModel\n","/* global google */\n\nimport { ComponentView, getInstanceByDom, throttle } from 'echarts/lib/echarts'\nimport { isNewEC, COMPONENT_TYPE } from './helper'\n\nconst GMapView = {\n  type: COMPONENT_TYPE,\n\n  render(gmapModel, ecModel, api) {\n    let rendering = true\n\n    const gmap = gmapModel.getGoogleMap()\n    const viewportRoot = api.getZr().painter.getViewportRoot()\n    const coordSys = gmapModel.coordinateSystem\n    const offsetEl = gmap.getDiv()\n    const renderOnMoving = gmapModel.get('renderOnMoving')\n    const oldWidth = offsetEl.clientWidth\n    const oldHeight = offsetEl.clientHeight\n\n    gmap.setOptions({\n      gestureHandling: gmapModel.get('roam') ? 'auto' : 'none'\n    })\n\n    let renderHandler = function() {\n      if (rendering) {\n        return\n      }\n\n      // need resize?\n      const width = offsetEl.clientWidth\n      const height = offsetEl.clientHeight\n      if (width !== oldWidth || height !== oldHeight) {\n        return resizeHandler.call(this)\n      }\n\n      const mapOffset = [\n        -parseInt(offsetEl.style.left, 10) || 0,\n        -parseInt(offsetEl.style.top, 10) || 0\n      ]\n      viewportRoot.style.left = mapOffset[0] + 'px'\n      viewportRoot.style.top = mapOffset[1] + 'px'\n\n      coordSys.setMapOffset(mapOffset)\n      gmapModel.__mapOffset = mapOffset\n\n      api.dispatchAction({\n        type: COMPONENT_TYPE + 'Roam',\n        animation: {\n          // in ECharts 5.x,\n          // we can set animation duration as 0\n          // to ensure no delay when moving or zooming\n          duration: 0\n        }\n      })\n    }\n\n    let resizeHandler = function() {\n      const width = offsetEl.firstChild.clientWidth\n      const height = offsetEl.firstChild.clientHeight\n      getInstanceByDom(api.getDom()).resize({ width, height })\n    }\n\n    this._oldRenderHandler && this._oldRenderHandler.remove()\n\n    if (!renderOnMoving) {\n      // TODO hide layer when moving\n      renderHandler = throttle(renderHandler, 100, true)\n      resizeHandler = throttle(resizeHandler, 100, true)\n    }\n\n    this._oldRenderHandler = google.maps.event.addListener(gmap, 'gmaprender', renderHandler)\n\n    rendering = false\n  },\n\n  dispose() {\n    this._oldRenderHandler && this._oldRenderHandler.remove()\n    this._oldRenderHandler = null\n\n    const component = this.__model\n    if (!component) {\n      return\n    }\n\n    const gmapInstance = component.getGoogleMap()\n\n    if (gmapInstance) {\n      // remove injected projection\n      delete gmapInstance.__overlayProjection\n\n      // clear all listeners of map instance\n      google.maps.event.clearInstanceListeners(gmapInstance)\n\n      // remove DOM of map instance\n      const mapDiv = gmapInstance.getDiv()\n      mapDiv.parentNode && mapDiv.parentNode.removeChild(mapDiv)\n    }\n\n    component.setGoogleMap(null)\n    component.setEChartsLayer(null)\n\n    if (component.coordinateSystem) {\n      component.coordinateSystem.setGoogleMap(null)\n      component.coordinateSystem = null\n    }\n  }\n}\n\nexport default isNewEC\n  ? ComponentView.extend(GMapView)\n  : GMapView\n","/**\n * Google Map component extension\n */\n\n import GMapCoordSys from './GMapCoordSys'\n import GMapModel from './GMapModel'\n import GMapView from './GMapView'\n import { isNewEC, ecVer, COMPONENT_TYPE } from './helper'\n\nexport { version, name } from '../package.json';\n\n/**\n * @typedef {import('../export').EChartsExtensionRegisters} EChartsExtensionRegisters\n */\n\n/**\n * Google Map extension installer\n * @param {EChartsExtensionRegisters} registers\n */\n export function install(registers) {\n  // add coordinate system support for pie series for ECharts < 5.4.0\n  if (!isNewEC || (ecVer[0] == 5 && ecVer[1] < 4)) {\n    registers.registerLayout(function(ecModel) {\n      ecModel.eachSeriesByType('pie', function (seriesModel) {\n        const coordSys = seriesModel.coordinateSystem\n        const data = seriesModel.getData()\n        const valueDim = data.mapDimension('value')\n        if (coordSys && coordSys.type === COMPONENT_TYPE) {\n          const center = seriesModel.get('center')\n          const point = coordSys.dataToPoint(center)\n          const cx = point[0]\n          const cy = point[1]\n          data.each(valueDim, function (value, idx) {\n            const layout = data.getItemLayout(idx)\n            layout.cx = cx\n            layout.cy = cy\n          })\n        }\n      })\n    })\n  }\n  // Model\n  isNewEC\n    ? registers.registerComponentModel(GMapModel)\n    : registers.extendComponentModel(GMapModel)\n  // View\n  isNewEC\n    ? registers.registerComponentView(GMapView)\n    : registers.extendComponentView(GMapView)\n  // Coordinate System\n  registers.registerCoordinateSystem(COMPONENT_TYPE, GMapCoordSys)\n  // Action\n  registers.registerAction(\n    {\n      type: COMPONENT_TYPE + 'Roam',\n      event: COMPONENT_TYPE + 'Roam',\n      update: 'updateLayout'\n    },\n    function(payload, ecModel) {\n      ecModel.eachComponent(COMPONENT_TYPE, function(gmapModel) {\n        const gmap = gmapModel.getGoogleMap()\n        const center = gmap.getCenter()\n        gmapModel.setCenterAndZoom([center.lng(), center.lat()], gmap.getZoom())\n      })\n    }\n  )\n}\n","import * as echarts from 'echarts/lib/echarts'\nimport { install } from './src/index'\nimport { isNewEC } from './src/helper'\n\nisNewEC ? echarts.use(install) : install(echarts)\n\nexport { name, version } from './src/index'\n"],"names":["ecVer","version","split","isNewEC","COMPONENT_TYPE","v2Equal","a","b","dataToCoordSize","dataSize","dataItem","zrUtil","map","dimIdx","val","halfSize","p1","p2","Math","abs","dataToPoint","GMapCoordSys","gmap","api","_gmap","dimensions","_mapOffset","_api","GMapCoordSysProto","prototype","excludedOptions","setZoom","zoom","_zoom","setCenter","center","latlng","google","maps","LatLng","_center","latLngToPixel","setMapOffset","mapOffset","setGoogleMap","getGoogleMap","data","px","x","y","pointToData","pt","pixelToLatLng","Point","lng","lat","getViewRect","graphic","BoundingRect","getWidth","getHeight","getRoamTransform","matrix","create","prepareCustoms","rect","coordSys","type","width","height","coord","bind","size","convertToPixel","ecModel","finder","value","convertFromPixel","gmapCoordSys","root","getDom","eachComponent","gmapModel","painter","getZr","viewportRoot","getViewportRoot","Map","Error","Overlay","createOverlayCtor","className","gmapRoot","querySelector","style","left","top","removeChild","document","createElement","cssText","appendChild","options","clone","get","echartsLayerZIndex","each","key","isArray","__projectionChangeListener","remove","event","addListener","layer","getEChartsLayer","setMap","overlay","setZIndex","setEChartsLayer","getViewportRootOffset","offsetLeft","offsetTop","normalizedCenter","gmapCenter","getCenter","gmapZoom","getZoom","centerOrZoomChanged","setOptions","__mapOffset","coordinateSystem","eachSeries","seriesModel","_root","OverlayView","onAdd","getMap","__overlayProjection","getProjection","getDiv","draw","trigger","onRemove","parentNode","zIndex","getZIndex","latLng","projection","Infinity","fromLatLngToContainerPixel","pixel","fromContainerPixelToLatLng","GMapModel","__gmap","__echartsLayer","setCenterAndZoom","option","defaultOption","roam","renderOnMoving","ComponentModel","extend","GMapView","render","rendering","offsetEl","oldWidth","clientWidth","oldHeight","clientHeight","gestureHandling","renderHandler","resizeHandler","call","parseInt","dispatchAction","animation","duration","firstChild","getInstanceByDom","resize","_oldRenderHandler","throttle","dispose","component","__model","gmapInstance","clearInstanceListeners","mapDiv","ComponentView","install","registers","registerLayout","eachSeriesByType","getData","valueDim","mapDimension","point","cx","cy","idx","layout","getItemLayout","registerComponentModel","extendComponentModel","registerComponentView","extendComponentView","registerCoordinateSystem","registerAction","update","payload","echarts","use"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAEO,IAAMA,KAAK,GAAGC,eAAO,CAACC,KAAK,CAAC,GAAG,CAAC,CAAA;EAEhC,IAAMC,OAAO,GAAGH,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAA;EAE5B,IAAMI,cAAc,GAAG,MAAM,CAAA;EAE7B,SAASC,OAAO,CAACC,CAAC,EAAEC,CAAC,EAAE;IAC5B,OAAOD,CAAC,IAAIC,CAAC,IAAID,CAAC,CAAC,CAAC,CAAC,KAAKC,CAAC,CAAC,CAAC,CAAC,IAAID,CAAC,CAAC,CAAC,CAAC,KAAKC,CAAC,CAAC,CAAC,CAAC,CAAA;EACjD;;ECVA;EAKA,SAASC,eAAe,CAACC,QAAQ,EAAEC,QAAQ,EAAE;EAC3CA,EAAAA,QAAQ,GAAGA,QAAQ,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;EAC7B,EAAA,OAAOC,YAAM,CAACC,GAAG,CACf,CAAC,CAAC,EAAE,CAAC,CAAC,EACN,UAASC,MAAM,EAAE;EACf,IAAA,IAAMC,GAAG,GAAGJ,QAAQ,CAACG,MAAM,CAAC,CAAA;EAC5B,IAAA,IAAME,QAAQ,GAAGN,QAAQ,CAACI,MAAM,CAAC,GAAG,CAAC,CAAA;MACrC,IAAMG,EAAE,GAAG,EAAE,CAAA;MACb,IAAMC,EAAE,GAAG,EAAE,CAAA;EACbD,IAAAA,EAAE,CAACH,MAAM,CAAC,GAAGC,GAAG,GAAGC,QAAQ,CAAA;EAC3BE,IAAAA,EAAE,CAACJ,MAAM,CAAC,GAAGC,GAAG,GAAGC,QAAQ,CAAA;EAC3BC,IAAAA,EAAE,CAAC,CAAC,GAAGH,MAAM,CAAC,GAAGI,EAAE,CAAC,CAAC,GAAGJ,MAAM,CAAC,GAAGH,QAAQ,CAAC,CAAC,GAAGG,MAAM,CAAC,CAAA;MACtD,OAAOK,IAAI,CAACC,GAAG,CACb,IAAI,CAACC,WAAW,CAACJ,EAAE,CAAC,CAACH,MAAM,CAAC,GAAG,IAAI,CAACO,WAAW,CAACH,EAAE,CAAC,CAACJ,MAAM,CAAC,CAC5D,CAAA;KACF,EACD,IAAI,CACL,CAAA;EACH,CAAA;EAEA,SAASQ,YAAY,CAACC,IAAI,EAAEC,GAAG,EAAE;IAC/B,IAAI,CAACC,KAAK,GAAGF,IAAI,CAAA;EACjB,EAAA,IAAI,CAACG,UAAU,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;EAChC,EAAA,IAAI,CAACC,UAAU,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACxB,IAAI,CAACC,IAAI,GAAGJ,GAAG,CAAA;EACjB,CAAA;EAEA,IAAMK,iBAAiB,GAAGP,YAAY,CAACQ,SAAS,CAAA;;EAEhD;EACA,IAAMC,eAAe,GAAG,CACtB,oBAAoB,EACpB,gBAAgB,CACjB,CAAA;EAEDF,iBAAiB,CAACG,OAAO,GAAG,UAASC,IAAI,EAAE;IACzC,IAAI,CAACC,KAAK,GAAGD,IAAI,CAAA;EACnB,CAAC,CAAA;EAEDJ,iBAAiB,CAACM,SAAS,GAAG,UAASC,MAAM,EAAE;EAC7C,EAAA,IAAMC,MAAM,GAAG,IAAIC,MAAM,CAACC,IAAI,CAACC,MAAM,CAACJ,MAAM,CAAC,CAAC,CAAC,EAAEA,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;IAC3D,IAAI,CAACK,OAAO,GAAGC,aAAa,CAACL,MAAM,EAAE,IAAI,CAACZ,KAAK,CAAC,CAAA;EAClD,CAAC,CAAA;EAEDI,iBAAiB,CAACc,YAAY,GAAG,UAASC,SAAS,EAAE;IACnD,IAAI,CAACjB,UAAU,GAAGiB,SAAS,CAAA;EAC7B,CAAC,CAAA;EAEDf,iBAAiB,CAACgB,YAAY,GAAG,UAAStB,IAAI,EAAE;IAC9C,IAAI,CAACE,KAAK,GAAGF,IAAI,CAAA;EACnB,CAAC,CAAA;EAEDM,iBAAiB,CAACiB,YAAY,GAAG,YAAW;IAC1C,OAAO,IAAI,CAACrB,KAAK,CAAA;EACnB,CAAC,CAAA;EAEDI,iBAAiB,CAACR,WAAW,GAAG,UAAS0B,IAAI,EAAE;EAC7C,EAAA,IAAMV,MAAM,GAAG,IAAIC,MAAM,CAACC,IAAI,CAACC,MAAM,CAACO,IAAI,CAAC,CAAC,CAAC,EAAEA,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;IACvD,IAAMC,EAAE,GAAGN,aAAa,CAACL,MAAM,EAAE,IAAI,CAACZ,KAAK,CAAC,CAAA;EAC5C,EAAA,IAAMmB,SAAS,GAAG,IAAI,CAACjB,UAAU,CAAA;EACjC,EAAA,OAAO,CAACqB,EAAE,CAACC,CAAC,GAAGL,SAAS,CAAC,CAAC,CAAC,EAAEI,EAAE,CAACE,CAAC,GAAGN,SAAS,CAAC,CAAC,CAAC,CAAC,CAAA;EACnD,CAAC,CAAA;EAEDf,iBAAiB,CAACsB,WAAW,GAAG,UAASC,EAAE,EAAE;EAC3C,EAAA,IAAMR,SAAS,GAAG,IAAI,CAACjB,UAAU,CAAA;EACjC,EAAA,IAAMU,MAAM,GAAGgB,aAAa,CAC1B,IAAIf,MAAM,CAACC,IAAI,CAACe,KAAK,CAACF,EAAE,CAAC,CAAC,CAAC,GAAGR,SAAS,CAAC,CAAC,CAAC,EAAEQ,EAAE,CAAC,CAAC,CAAC,GAAGR,SAAS,CAAC,CAAC,CAAC,CAAC,EACjE,IAAI,CAACnB,KAAK,CACX,CAAA;IACD,OAAO,CAACY,MAAM,CAACkB,GAAG,EAAE,EAAElB,MAAM,CAACmB,GAAG,EAAE,CAAC,CAAA;EACrC,CAAC,CAAA;EAED3B,iBAAiB,CAAC4B,WAAW,GAAG,YAAW;EACzC,EAAA,IAAMjC,GAAG,GAAG,IAAI,CAACI,IAAI,CAAA;EACrB,EAAA,OAAO,IAAI8B,eAAO,CAACC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAEnC,GAAG,CAACoC,QAAQ,EAAE,EAAEpC,GAAG,CAACqC,SAAS,EAAE,CAAC,CAAA;EACxE,CAAC,CAAA;EAEDhC,iBAAiB,CAACiC,gBAAgB,GAAG,YAAW;IAC9C,OAAOC,cAAM,CAACC,MAAM,EAAE,CAAA;EACxB,CAAC,CAAA;EAEDnC,iBAAiB,CAACoC,cAAc,GAAG,YAAW;EAC5C,EAAA,IAAMC,IAAI,GAAG,IAAI,CAACT,WAAW,EAAE,CAAA;IAC/B,OAAO;EACLU,IAAAA,QAAQ,EAAE;EACRC,MAAAA,IAAI,EAAE/D,cAAc;QACpB4C,CAAC,EAAEiB,IAAI,CAACjB,CAAC;QACTC,CAAC,EAAEgB,IAAI,CAAChB,CAAC;QACTmB,KAAK,EAAEH,IAAI,CAACG,KAAK;QACjBC,MAAM,EAAEJ,IAAI,CAACI,MAAAA;OACd;EACD9C,IAAAA,GAAG,EAAE;QACH+C,KAAK,EAAE3D,YAAM,CAAC4D,IAAI,CAAC,IAAI,CAACnD,WAAW,EAAE,IAAI,CAAC;EAC1CoD,MAAAA,IAAI,EAAE7D,YAAM,CAAC4D,IAAI,CAAC/D,eAAe,EAAE,IAAI,CAAA;EACzC,KAAA;KACD,CAAA;EACH,CAAC,CAAA;EAEDoB,iBAAiB,CAAC6C,cAAc,GAAG,UAASC,OAAO,EAAEC,MAAM,EAAEC,KAAK,EAAE;EAClE;EACA,EAAA,OAAO,IAAI,CAACxD,WAAW,CAACwD,KAAK,CAAC,CAAA;EAChC,CAAC,CAAA;EAEDhD,iBAAiB,CAACiD,gBAAgB,GAAG,UAASH,OAAO,EAAEC,MAAM,EAAEC,KAAK,EAAE;EACpE;EACA,EAAA,OAAO,IAAI,CAAC1B,WAAW,CAAC0B,KAAK,CAAC,CAAA;EAChC,CAAC,CAAA;EAEDvD,YAAY,CAAC0C,MAAM,GAAG,UAASW,OAAO,EAAEnD,GAAG,EAAE;EAC3C,EAAA,IAAIuD,YAAY,CAAA;EAChB,EAAA,IAAMC,IAAI,GAAGxD,GAAG,CAACyD,MAAM,EAAE,CAAA;EAEzBN,EAAAA,OAAO,CAACO,aAAa,CAAC7E,cAAc,EAAE,UAAS8E,SAAS,EAAE;EACxD,IAAA,IAAMC,OAAO,GAAG5D,GAAG,CAAC6D,KAAK,EAAE,CAACD,OAAO,CAAA;EACnC,IAAA,IAAME,YAAY,GAAGF,OAAO,CAACG,eAAe,EAAE,CAAA;EAC9C,IAAA,IAAI,OAAOjD,MAAM,KAAK,WAAW,IAAI,CAACA,MAAM,CAACC,IAAI,IAAI,CAACD,MAAM,CAACC,IAAI,CAACiD,GAAG,EAAE;EACrE,MAAA,MAAM,IAAIC,KAAK,CAAC,8BAA8B,CAAC,CAAA;EACjD,KAAA;EACAC,IAAAA,OAAO,GAAGA,OAAO,IAAIC,iBAAiB,EAAE,CAAA;EACxC,IAAA,IAAIZ,YAAY,EAAE;EAChB,MAAA,MAAM,IAAIU,KAAK,CAAC,0CAA0C,CAAC,CAAA;EAC7D,KAAA;EACA,IAAA,IAAIlE,IAAI,GAAG4D,SAAS,CAACrC,YAAY,EAAE,CAAA;MACnC,IAAI,CAACvB,IAAI,EAAE;EACT;QACA,IAAMqE,SAAS,GAAG,yBAAyB,CAAA;QAC3C,IAAIC,QAAQ,GAAGb,IAAI,CAACc,aAAa,CAAC,GAAG,GAAGF,SAAS,CAAC,CAAA;EAClD,MAAA,IAAIC,QAAQ,EAAE;EACZ;EACA;EACAP,QAAAA,YAAY,CAACS,KAAK,CAACC,IAAI,GAAG,GAAG,CAAA;EAC7BV,QAAAA,YAAY,CAACS,KAAK,CAACE,GAAG,GAAG,GAAG,CAAA;EAC5BjB,QAAAA,IAAI,CAACkB,WAAW,CAACL,QAAQ,CAAC,CAAA;EAC5B,OAAA;EACAA,MAAAA,QAAQ,GAAGM,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC,CAAA;QACxCP,QAAQ,CAACD,SAAS,GAAGA,SAAS,CAAA;EAC9BC,MAAAA,QAAQ,CAACE,KAAK,CAACM,OAAO,GAAG,iDAAiD,CAAA;EAC1ErB,MAAAA,IAAI,CAACsB,WAAW,CAACT,QAAQ,CAAC,CAAA;QAE1B,IAAMU,OAAO,GAAG3F,YAAM,CAAC4F,KAAK,CAACrB,SAAS,CAACsB,GAAG,EAAE,CAAC,CAAA;EAC7C,MAAA,IAAMC,kBAAkB,GAAGH,OAAO,CAACG,kBAAkB,CAAA;EACrD;EACA9F,MAAAA,YAAM,CAAC+F,IAAI,CAAC5E,eAAe,EAAE,UAAS6E,GAAG,EAAE;UACzC,OAAOL,OAAO,CAACK,GAAG,CAAC,CAAA;EACrB,OAAC,CAAC,CAAA;EACF,MAAA,IAAMxE,OAAM,GAAGmE,OAAO,CAACnE,MAAM,CAAA;EAC7B;EACA,MAAA,IAAIxB,YAAM,CAACiG,OAAO,CAACzE,OAAM,CAAC,EAAE;UAC1BmE,OAAO,CAACnE,MAAM,GAAG;EACfmB,UAAAA,GAAG,EAAEnB,OAAM,CAAC,CAAC,CAAC;YACdoB,GAAG,EAAEpB,OAAM,CAAC,CAAC,CAAA;WACd,CAAA;EACH,OAAA;QAEAb,IAAI,GAAG,IAAIe,MAAM,CAACC,IAAI,CAACiD,GAAG,CAACK,QAAQ,EAAEU,OAAO,CAAC,CAAA;EAC7CpB,MAAAA,SAAS,CAACtC,YAAY,CAACtB,IAAI,CAAC,CAAA;QAE5B4D,SAAS,CAAC2B,0BAA0B,IAAI3B,SAAS,CAAC2B,0BAA0B,CAACC,MAAM,EAAE,CAAA;EACrF5B,MAAAA,SAAS,CAAC2B,0BAA0B,GAAGxE,MAAM,CAACC,IAAI,CAACyE,KAAK,CAACC,WAAW,CAAC1F,IAAI,EAAE,oBAAoB,EAC7F,YAAW;EACT,QAAA,IAAM2F,KAAK,GAAG/B,SAAS,CAACgC,eAAe,EAAE,CAAA;EACzCD,QAAAA,KAAK,IAAIA,KAAK,CAACE,MAAM,CAAC,IAAI,CAAC,CAAA;UAE3B,IAAMC,OAAO,GAAG,IAAI3B,OAAO,CAACJ,YAAY,EAAE/D,IAAI,CAAC,CAAA;EAC/C8F,QAAAA,OAAO,CAACC,SAAS,CAACZ,kBAAkB,CAAC,CAAA;EACrCvB,QAAAA,SAAS,CAACoC,eAAe,CAACF,OAAO,CAAC,CAAA;EACpC,OAAC,CACF,CAAA;;EAED;QACAjC,OAAO,CAACoC,qBAAqB,GAAG,YAAW;UACzC,OAAO;EAAEC,UAAAA,UAAU,EAAE,CAAC;EAAEC,UAAAA,SAAS,EAAE,CAAA;WAAG,CAAA;SACvC,CAAA;EACH,KAAA;EAEA,IAAA,IAAMtF,MAAM,GAAG+C,SAAS,CAACsB,GAAG,CAAC,QAAQ,CAAC,CAAA;EACtC,IAAA,IAAMkB,gBAAgB,GAAG,CACvBvF,MAAM,CAACmB,GAAG,IAAI,IAAI,GAAGnB,MAAM,CAACmB,GAAG,GAAGnB,MAAM,CAAC,CAAC,CAAC,EAC3CA,MAAM,CAACoB,GAAG,IAAI,IAAI,GAAGpB,MAAM,CAACoB,GAAG,GAAGpB,MAAM,CAAC,CAAC,CAAC,CAC5C,CAAA;EACD,IAAA,IAAMH,IAAI,GAAGkD,SAAS,CAACsB,GAAG,CAAC,MAAM,CAAC,CAAA;MAClC,IAAIrE,MAAM,IAAIH,IAAI,EAAE;EAClB,MAAA,IAAM2F,UAAU,GAAGrG,IAAI,CAACsG,SAAS,EAAE,CAAA;EACnC,MAAA,IAAMC,QAAQ,GAAGvG,IAAI,CAACwG,OAAO,EAAE,CAAA;EAC/B,MAAA,IAAMC,mBAAmB,GAAG7C,SAAS,CAAC6C,mBAAmB,CAAC,CAACJ,UAAU,CAACrE,GAAG,EAAE,EAAEqE,UAAU,CAACpE,GAAG,EAAE,CAAC,EAAEsE,QAAQ,CAAC,CAAA;EACzG,MAAA,IAAIE,mBAAmB,EAAE;EACvB,QAAA,IAAM5E,EAAE,GAAG,IAAId,MAAM,CAACC,IAAI,CAACC,MAAM,CAACmF,gBAAgB,CAAC,CAAC,CAAC,EAAEA,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAA;UAC3EpG,IAAI,CAAC0G,UAAU,CAAC;EACd7F,UAAAA,MAAM,EAAEgB,EAAE;EACVnB,UAAAA,IAAI,EAAEA,IAAAA;EACR,SAAC,CAAC,CAAA;EACJ,OAAA;EACF,KAAA;EAEA8C,IAAAA,YAAY,GAAG,IAAIzD,YAAY,CAACC,IAAI,EAAEC,GAAG,CAAC,CAAA;EAC1CuD,IAAAA,YAAY,CAACpC,YAAY,CAACwC,SAAS,CAAC+C,WAAW,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;EAC1DnD,IAAAA,YAAY,CAAC/C,OAAO,CAACC,IAAI,CAAC,CAAA;EAC1B8C,IAAAA,YAAY,CAAC5C,SAAS,CAACwF,gBAAgB,CAAC,CAAA;MAExCxC,SAAS,CAACgD,gBAAgB,GAAGpD,YAAY,CAAA;EAC3C,GAAC,CAAC,CAAA;EAEFJ,EAAAA,OAAO,CAACyD,UAAU,CAAC,UAASC,WAAW,EAAE;MACvC,IAAIA,WAAW,CAAC5B,GAAG,CAAC,kBAAkB,CAAC,KAAKpG,cAAc,EAAE;QAC1DgI,WAAW,CAACF,gBAAgB,GAAGpD,YAAY,CAAA;EAC7C,KAAA;EACF,GAAC,CAAC,CAAA;;EAEF;EACA,EAAA,OAAOA,YAAY,IAAI,CAACA,YAAY,CAAC,CAAA;EACvC,CAAC,CAAA;EAED,IAAIW,OAAO,CAAA;EAEX,SAASC,iBAAiB,GAAG;EACzB,EAAA,SAASD,OAAO,CAACV,IAAI,EAAEzD,IAAI,EAAE;MAC3B,IAAI,CAAC+G,KAAK,GAAGtD,IAAI,CAAA;EACjB,IAAA,IAAI,CAACoC,MAAM,CAAC7F,IAAI,CAAC,CAAA;EACnB,GAAA;IAEAmE,OAAO,CAAC5D,SAAS,GAAG,IAAIQ,MAAM,CAACC,IAAI,CAACgG,WAAW,EAAE,CAAA;EAEjD7C,EAAAA,OAAO,CAAC5D,SAAS,CAAC0G,KAAK,GAAG,YAAW;EACnC,IAAA,IAAMjH,IAAI,GAAG,IAAI,CAACkH,MAAM,EAAE,CAAA;EAC1BlH,IAAAA,IAAI,CAACmH,mBAAmB,GAAG,IAAI,CAACC,aAAa,EAAE,CAAA;EAC/CpH,IAAAA,IAAI,CAACqH,MAAM,EAAE,CAAC9C,aAAa,CAAC,iBAAiB,CAAC,CAACQ,WAAW,CAAC,IAAI,CAACgC,KAAK,CAAC,CAAA;KACvE,CAAA;;EAED;EACJ;EACA;EACI5C,EAAAA,OAAO,CAAC5D,SAAS,CAAC+G,IAAI,GAAG,YAAW;EAClCvG,IAAAA,MAAM,CAACC,IAAI,CAACyE,KAAK,CAAC8B,OAAO,CAAC,IAAI,CAACL,MAAM,EAAE,EAAE,YAAY,CAAC,CAAA;KACvD,CAAA;EAED/C,EAAAA,OAAO,CAAC5D,SAAS,CAACiH,QAAQ,GAAG,YAAW;MACtC,IAAI,CAACT,KAAK,CAACU,UAAU,CAAC9C,WAAW,CAAC,IAAI,CAACoC,KAAK,CAAC,CAAA;MAC7C,IAAI,CAACA,KAAK,GAAG,IAAI,CAAA;KAClB,CAAA;EAED5C,EAAAA,OAAO,CAAC5D,SAAS,CAACwF,SAAS,GAAG,UAAS2B,MAAM,EAAE;EAC7C,IAAA,IAAI,CAACX,KAAK,CAACvC,KAAK,CAACkD,MAAM,GAAGA,MAAM,CAAA;KACjC,CAAA;EAEDvD,EAAAA,OAAO,CAAC5D,SAAS,CAACoH,SAAS,GAAG,YAAW;EACvC,IAAA,OAAO,IAAI,CAACZ,KAAK,CAACvC,KAAK,CAACkD,MAAM,CAAA;KAC/B,CAAA;EAED,EAAA,OAAOvD,OAAO,CAAA;EAClB,CAAA;EAEA,SAAShD,aAAa,CAACyG,MAAM,EAAEtI,GAAG,EAAE;EAClC,EAAA,IAAMuI,UAAU,GAAGvI,GAAG,CAAC6H,mBAAmB,CAAA;IAC1C,IAAI,CAACU,UAAU,EAAE;EACf,IAAA,OAAO,IAAI9G,MAAM,CAACC,IAAI,CAACe,KAAK,CAAC,CAAC+F,QAAQ,EAAE,CAACA,QAAQ,CAAC,CAAA;EACpD,GAAA;EAEA,EAAA,OAAOD,UAAU,CAACE,0BAA0B,CAACH,MAAM,CAAC,CAAA;EACtD,CAAA;EAEA,SAAS9F,aAAa,CAACkG,KAAK,EAAE1I,GAAG,EAAE;EACjC,EAAA,IAAMuI,UAAU,GAAGvI,GAAG,CAAC6H,mBAAmB,CAAA;IAC1C,IAAI,CAACU,UAAU,EAAE;EACf,IAAA,OAAO,IAAI9G,MAAM,CAACC,IAAI,CAACe,KAAK,CAAC,CAAC+F,QAAQ,EAAE,CAACA,QAAQ,CAAC,CAAA;EACpD,GAAA;EAEA,EAAA,OAAOD,UAAU,CAACI,0BAA0B,CAACD,KAAK,CAAC,CAAA;EACrD,CAAA;EAEA1H,iBAAiB,CAACH,UAAU,GAAGJ,YAAY,CAACI,UAAU,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;EAEvEG,iBAAiB,CAACuC,IAAI,GAAG/D,cAAc;;ECjRvC,IAAMoJ,SAAS,GAAG;EAChBrF,EAAAA,IAAI,EAAE/D,cAAc;IAEpBwC,YAAY,EAAA,SAAA,YAAA,CAACtB,IAAI,EAAE;MACjB,IAAI,CAACmI,MAAM,GAAGnI,IAAI,CAAA;KACnB;EAEDuB,EAAAA,YAAY,EAAG,SAAA,YAAA,GAAA;EACb;MACA,OAAO,IAAI,CAAC4G,MAAM,CAAA;KACnB;IAEDnC,eAAe,EAAA,SAAA,eAAA,CAACL,KAAK,EAAE;MACrB,IAAI,CAACyC,cAAc,GAAGzC,KAAK,CAAA;KAC5B;EAEDC,EAAAA,eAAe,EAAG,SAAA,eAAA,GAAA;MAChB,OAAO,IAAI,CAACwC,cAAc,CAAA;KAC3B;EAEDC,EAAAA,gBAAgB,EAACxH,SAAAA,gBAAAA,CAAAA,MAAM,EAAEH,IAAI,EAAE;EAC7B,IAAA,IAAI,CAAC4H,MAAM,CAACzH,MAAM,GAAGA,MAAM,CAAA;EAC3B,IAAA,IAAI,CAACyH,MAAM,CAAC5H,IAAI,GAAGA,IAAI,CAAA;KACxB;EAED+F,EAAAA,mBAAmB,EAAC5F,SAAAA,mBAAAA,CAAAA,MAAM,EAAEH,IAAI,EAAE;EAChC,IAAA,IAAM4H,MAAM,GAAG,IAAI,CAACA,MAAM,CAAA;EAC1B,IAAA,OAAO,EAAEvJ,OAAO,CAAC8B,MAAM,EAAEyH,MAAM,CAACzH,MAAM,CAAC,IAAIH,IAAI,KAAK4H,MAAM,CAAC5H,IAAI,CAAC,CAAA;KACjE;EAED6H,EAAAA,aAAa,EAAE;EACb1H,IAAAA,MAAM,EAAE;EAAEoB,MAAAA,GAAG,EAAE,QAAQ;EAAED,MAAAA,GAAG,EAAE,UAAA;OAAY;EAC1CtB,IAAAA,IAAI,EAAE,CAAC;EAEP;EACA;EACA8H,IAAAA,IAAI,EAAE,IAAI;EACVrD,IAAAA,kBAAkB,EAAE,IAAI;EACxBsD,IAAAA,cAAc,EAAE,IAAA;EAClB,GAAA;EACF,CAAC,CAAA;AAED,oBAAe5J,OAAO,GAClB6J,sBAAc,CAACC,MAAM,CAACT,SAAS,CAAC,GAChCA,SAAS;;EC/Cb;EAKA,IAAMU,QAAQ,GAAG;EACf/F,EAAAA,IAAI,EAAE/D,cAAc;EAEpB+J,EAAAA,MAAM,kBAACjF,SAAS,EAAER,OAAO,EAAEnD,GAAG,EAAE;MAC9B,IAAI6I,SAAS,GAAG,IAAI,CAAA;EAEpB,IAAA,IAAM9I,IAAI,GAAG4D,SAAS,CAACrC,YAAY,EAAE,CAAA;MACrC,IAAMwC,YAAY,GAAG9D,GAAG,CAAC6D,KAAK,EAAE,CAACD,OAAO,CAACG,eAAe,EAAE,CAAA;EAC1D,IAAA,IAAMpB,QAAQ,GAAGgB,SAAS,CAACgD,gBAAgB,CAAA;EAC3C,IAAA,IAAMmC,QAAQ,GAAG/I,IAAI,CAACqH,MAAM,EAAE,CAAA;EAC9B,IAAA,IAAMoB,cAAc,GAAG7E,SAAS,CAACsB,GAAG,CAAC,gBAAgB,CAAC,CAAA;EACtD,IAAA,IAAM8D,QAAQ,GAAGD,QAAQ,CAACE,WAAW,CAAA;EACrC,IAAA,IAAMC,SAAS,GAAGH,QAAQ,CAACI,YAAY,CAAA;MAEvCnJ,IAAI,CAAC0G,UAAU,CAAC;QACd0C,eAAe,EAAExF,SAAS,CAACsB,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,MAAA;EACpD,KAAC,CAAC,CAAA;MAEF,IAAImE,aAAa,GAAG,SAAW,aAAA,GAAA;EAC7B,MAAA,IAAIP,SAAS,EAAE;EACb,QAAA,OAAA;EACF,OAAA;;EAEA;EACA,MAAA,IAAMhG,KAAK,GAAGiG,QAAQ,CAACE,WAAW,CAAA;EAClC,MAAA,IAAMlG,MAAM,GAAGgG,QAAQ,CAACI,YAAY,CAAA;EACpC,MAAA,IAAIrG,KAAK,KAAKkG,QAAQ,IAAIjG,MAAM,KAAKmG,SAAS,EAAE;EAC9C,QAAA,OAAOI,aAAa,CAACC,IAAI,CAAC,IAAI,CAAC,CAAA;EACjC,OAAA;EAEA,MAAA,IAAMlI,SAAS,GAAG,CAChB,CAACmI,QAAQ,CAACT,QAAQ,CAACvE,KAAK,CAACC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,EACvC,CAAC+E,QAAQ,CAACT,QAAQ,CAACvE,KAAK,CAACE,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,CACvC,CAAA;QACDX,YAAY,CAACS,KAAK,CAACC,IAAI,GAAGpD,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAA;QAC7C0C,YAAY,CAACS,KAAK,CAACE,GAAG,GAAGrD,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAA;EAE5CuB,MAAAA,QAAQ,CAACxB,YAAY,CAACC,SAAS,CAAC,CAAA;QAChCuC,SAAS,CAAC+C,WAAW,GAAGtF,SAAS,CAAA;QAEjCpB,GAAG,CAACwJ,cAAc,CAAC;UACjB5G,IAAI,EAAE/D,cAAc,GAAG,MAAM;EAC7B4K,QAAAA,SAAS,EAAE;EACT;EACA;EACA;EACAC,UAAAA,QAAQ,EAAE,CAAA;EACZ,SAAA;EACF,OAAC,CAAC,CAAA;OACH,CAAA;MAED,IAAIL,aAAa,GAAG,SAAW,aAAA,GAAA;EAC7B,MAAA,IAAMxG,KAAK,GAAGiG,QAAQ,CAACa,UAAU,CAACX,WAAW,CAAA;EAC7C,MAAA,IAAMlG,MAAM,GAAGgG,QAAQ,CAACa,UAAU,CAACT,YAAY,CAAA;QAC/CU,wBAAgB,CAAC5J,GAAG,CAACyD,MAAM,EAAE,CAAC,CAACoG,MAAM,CAAC;EAAEhH,QAAAA,KAAK,EAALA,KAAK;EAAEC,QAAAA,MAAM,EAANA,MAAAA;EAAO,OAAC,CAAC,CAAA;OACzD,CAAA;MAED,IAAI,CAACgH,iBAAiB,IAAI,IAAI,CAACA,iBAAiB,CAACvE,MAAM,EAAE,CAAA;MAEzD,IAAI,CAACiD,cAAc,EAAE;EACnB;QACAY,aAAa,GAAGW,gBAAQ,CAACX,aAAa,EAAE,GAAG,EAAE,IAAI,CAAC,CAAA;QAClDC,aAAa,GAAGU,gBAAQ,CAACV,aAAa,EAAE,GAAG,EAAE,IAAI,CAAC,CAAA;EACpD,KAAA;EAEA,IAAA,IAAI,CAACS,iBAAiB,GAAGhJ,MAAM,CAACC,IAAI,CAACyE,KAAK,CAACC,WAAW,CAAC1F,IAAI,EAAE,YAAY,EAAEqJ,aAAa,CAAC,CAAA;EAEzFP,IAAAA,SAAS,GAAG,KAAK,CAAA;KAClB;EAEDmB,EAAAA,OAAO,EAAG,SAAA,OAAA,GAAA;MACR,IAAI,CAACF,iBAAiB,IAAI,IAAI,CAACA,iBAAiB,CAACvE,MAAM,EAAE,CAAA;MACzD,IAAI,CAACuE,iBAAiB,GAAG,IAAI,CAAA;EAE7B,IAAA,IAAMG,SAAS,GAAG,IAAI,CAACC,OAAO,CAAA;MAC9B,IAAI,CAACD,SAAS,EAAE;EACd,MAAA,OAAA;EACF,KAAA;EAEA,IAAA,IAAME,YAAY,GAAGF,SAAS,CAAC3I,YAAY,EAAE,CAAA;EAE7C,IAAA,IAAI6I,YAAY,EAAE;EAChB;QACA,OAAOA,YAAY,CAACjD,mBAAmB,CAAA;;EAEvC;QACApG,MAAM,CAACC,IAAI,CAACyE,KAAK,CAAC4E,sBAAsB,CAACD,YAAY,CAAC,CAAA;;EAEtD;EACA,MAAA,IAAME,MAAM,GAAGF,YAAY,CAAC/C,MAAM,EAAE,CAAA;QACpCiD,MAAM,CAAC7C,UAAU,IAAI6C,MAAM,CAAC7C,UAAU,CAAC9C,WAAW,CAAC2F,MAAM,CAAC,CAAA;EAC5D,KAAA;EAEAJ,IAAAA,SAAS,CAAC5I,YAAY,CAAC,IAAI,CAAC,CAAA;EAC5B4I,IAAAA,SAAS,CAAClE,eAAe,CAAC,IAAI,CAAC,CAAA;MAE/B,IAAIkE,SAAS,CAACtD,gBAAgB,EAAE;EAC9BsD,MAAAA,SAAS,CAACtD,gBAAgB,CAACtF,YAAY,CAAC,IAAI,CAAC,CAAA;QAC7C4I,SAAS,CAACtD,gBAAgB,GAAG,IAAI,CAAA;EACnC,KAAA;EACF,GAAA;EACF,CAAC,CAAA;AAED,mBAAe/H,OAAO,GAClB0L,qBAAa,CAAC5B,MAAM,CAACC,QAAQ,CAAC,GAC9BA,QAAQ;;;;;EC9GZ;EACA;EACA;;EASA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACQ,SAAS4B,OAAO,CAACC,SAAS,EAAE;EAClC;EACA,EAAA,IAAI,CAAC5L,OAAO,IAAKH,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAIA,KAAK,CAAC,CAAC,CAAC,GAAG,CAAE,EAAE;EAC/C+L,IAAAA,SAAS,CAACC,cAAc,CAAC,UAAStH,OAAO,EAAE;EACzCA,MAAAA,OAAO,CAACuH,gBAAgB,CAAC,KAAK,EAAE,UAAU7D,WAAW,EAAE;EACrD,QAAA,IAAMlE,QAAQ,GAAGkE,WAAW,CAACF,gBAAgB,CAAA;EAC7C,QAAA,IAAMpF,IAAI,GAAGsF,WAAW,CAAC8D,OAAO,EAAE,CAAA;EAClC,QAAA,IAAMC,QAAQ,GAAGrJ,IAAI,CAACsJ,YAAY,CAAC,OAAO,CAAC,CAAA;EAC3C,QAAA,IAAIlI,QAAQ,IAAIA,QAAQ,CAACC,IAAI,KAAK/D,cAAc,EAAE;EAChD,UAAA,IAAM+B,MAAM,GAAGiG,WAAW,CAAC5B,GAAG,CAAC,QAAQ,CAAC,CAAA;EACxC,UAAA,IAAM6F,KAAK,GAAGnI,QAAQ,CAAC9C,WAAW,CAACe,MAAM,CAAC,CAAA;EAC1C,UAAA,IAAMmK,EAAE,GAAGD,KAAK,CAAC,CAAC,CAAC,CAAA;EACnB,UAAA,IAAME,EAAE,GAAGF,KAAK,CAAC,CAAC,CAAC,CAAA;YACnBvJ,IAAI,CAAC4D,IAAI,CAACyF,QAAQ,EAAE,UAAUvH,KAAK,EAAE4H,GAAG,EAAE;EACxC,YAAA,IAAMC,MAAM,GAAG3J,IAAI,CAAC4J,aAAa,CAACF,GAAG,CAAC,CAAA;cACtCC,MAAM,CAACH,EAAE,GAAGA,EAAE,CAAA;cACdG,MAAM,CAACF,EAAE,GAAGA,EAAE,CAAA;EAChB,WAAC,CAAC,CAAA;EACJ,SAAA;EACF,OAAC,CAAC,CAAA;EACJ,KAAC,CAAC,CAAA;EACJ,GAAA;EACA;EACApM,EAAAA,OAAO,GACH4L,SAAS,CAACY,sBAAsB,CAACnD,WAAS,CAAC,GAC3CuC,SAAS,CAACa,oBAAoB,CAACpD,WAAS,CAAC,CAAA;EAC7C;EACArJ,EAAAA,OAAO,GACH4L,SAAS,CAACc,qBAAqB,CAAC3C,UAAQ,CAAC,GACzC6B,SAAS,CAACe,mBAAmB,CAAC5C,UAAQ,CAAC,CAAA;EAC3C;EACA6B,EAAAA,SAAS,CAACgB,wBAAwB,CAAC3M,cAAc,EAAEiB,YAAY,CAAC,CAAA;EAChE;IACA0K,SAAS,CAACiB,cAAc,CACtB;MACE7I,IAAI,EAAE/D,cAAc,GAAG,MAAM;MAC7B2G,KAAK,EAAE3G,cAAc,GAAG,MAAM;EAC9B6M,IAAAA,MAAM,EAAE,cAAA;EACV,GAAC,EACD,UAASC,OAAO,EAAExI,OAAO,EAAE;EACzBA,IAAAA,OAAO,CAACO,aAAa,CAAC7E,cAAc,EAAE,UAAS8E,SAAS,EAAE;EACxD,MAAA,IAAM5D,IAAI,GAAG4D,SAAS,CAACrC,YAAY,EAAE,CAAA;EACrC,MAAA,IAAMV,MAAM,GAAGb,IAAI,CAACsG,SAAS,EAAE,CAAA;EAC/B1C,MAAAA,SAAS,CAACyE,gBAAgB,CAAC,CAACxH,MAAM,CAACmB,GAAG,EAAE,EAAEnB,MAAM,CAACoB,GAAG,EAAE,CAAC,EAAEjC,IAAI,CAACwG,OAAO,EAAE,CAAC,CAAA;EAC1E,KAAC,CAAC,CAAA;EACJ,GAAC,CACF,CAAA;EACH;;EC9DA3H,OAAO,GAAGgN,OAAO,CAACC,GAAG,CAACtB,OAAO,CAAC,GAAGA,OAAO,CAACqB,OAAO,CAAC;;;;;;;;;;;"}